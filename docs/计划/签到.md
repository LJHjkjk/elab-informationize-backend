# 签到系统

## 一、需求

### 1.打卡

#### 1.1用户

可以上下班打卡

#### 1.2管理员

导出相应成员的打卡时长，可以快捷导出本周和上周的打卡。

可以记录用户每周打卡时长，最后统计出一个学期或者一年的打卡。

### 2.签到

#### 2.1用户

可以在手机端打开签到界面，进行相应的签到

#### 2.2管理员

可以发起签到，设置签到时间，签到方式等。签到完成之后可以查看签到结果。

## 二、设计

为方便签到，为签到功能设计手机端。手机端目前功能只设计一个签到功能。如果可以的话为电脑端也集成打卡功能。

### 1.打卡

#### 1.1用户

用户有两个状态：未打卡，打卡中

##### 未打卡

用户没有开始打卡的时候，只显示一个上班按钮。当用户点击后上班后，开始打卡。

##### 打卡中

打卡开始后显示下班按钮，还有打卡开始时间。点击下班按钮，打卡结束，进入打卡结算画面，会显示本次打卡结果。打卡结算画面有一个返回按钮，点击返回按钮后将返回打卡界面，此时进入未打卡界面。

==打卡失败==：打卡有状态：打卡中，打卡成功，打卡失败。当用户在每天结束的时候还没有下班，本次会自动失败

##### 个人打开记录

用户可以查看自己本周打卡记录还有本周打卡时长。

**后端**：本周的打卡会记录用户的每天打卡信息。下一周会将上一周打卡记录删除，只记录上周的打卡总时长。

#### 1.2管理员

管理员主要可以查看用户的打卡时长。管理员可以查看的打卡时长：本周、上周、指定周数。

#### 1.3前端

用户的界面只有两个选项：打卡和打卡记录。

管理员的选项多了用户打卡记录表。

#### 1.4后端

##### 数据库

设计两个数据库，一个记录单次打卡，一个记录每周打卡。

单次打卡记录每周清空，清空前将本周的数据记录到每周的打卡记录表中。

### 2.签到

#### 1.1发起签到

有两种发起签到方式：

+ 发布到签到大厅：成员需要找到自己需要的签到
+ 发布到个人：管理员提前将需要签到的人选择好，签到直接发布到个人

##### 发布到签到大厅

管理员可以发起签到。发起签到的时候需要指定签到的信息：开始时间、结束时间、签到形式、签到标题、签到结果导入。当发起签到后，有关签到的信息会在签到记录中展示。

签到记录中记录着查看者发起的所有签到。里面会记录签到的一些信息：签到状态（未开始、正在签到、签到结束）、开始时间、结束时间、签到的成员。

##### 发布到个人

管理员在发起签到的时候直接指定需要签到的人，直接将签到发布到个人。（==需要升级一下成员选择的功能，添加上成员的组别和年级==）



==扫码签到==：如果是扫码签到，发布签到后管理员可以在签到记录中看到二维码。

#### 1.2用户签到

签到目前有两种形式：直接签到、扫码签到。

用户进入签到界面后有三个功能：扫码签到，签到大厅，个人签到。

##### 扫码签到

电脑端没有此功能

扫码签到可以扫描管理员二维码来签到

##### 签到大厅

签到大厅中有管理员的发布的签到，用户可以在其中找到自己需要的签到。

##### 个人签到

用户可以在这里看到管理员发布到个人的签到。同时，待办事项中也会有签到提示，直接链接到个人签到的界面。

#### 1.3签到结果

管理员可以在自己的签到记录中看到自己发起的所有签到结果。

签到结果还支持可以导入其他的系统中，例如可以导入到扩展ppt的签到记录中。

#### 1.4后端

所有的签到在未开始和正在签到两种状态时，签到信息均储存在内存中，当签到完成之后才会将签到信息持久化储存。

如果是大厅签到，签到信息会储存在总的签到表中。如果是个人签到，签到信息还会放在个人的任务中心。当用户发送检测请求的时候，如果到达签到预定的时间，就会发送给用户。



## 三、后端设计

所有的签到都有一个状态：未开始、进行中、结束。当状态为未开始和进行中的时候储存在内存中。当结束后从内存中删去，转为储存在mysql的签到记录表中。

### 1.签到大厅



